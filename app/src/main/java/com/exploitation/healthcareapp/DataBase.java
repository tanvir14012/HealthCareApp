package com.exploitation.healthcareapp;

import android.content.ContentValues;
import android.content.Context;
import android.database.sqlite.SQLiteDatabase;
import android.database.sqlite.SQLiteOpenHelper;
import android.graphics.Bitmap;
import android.graphics.BitmapFactory;
import android.util.Log;

import java.io.ByteArrayOutputStream;

/**
 * Created by TANVIR on 5/8/2018.
 */

public class DataBase extends SQLiteOpenHelper {
    private static final int VERSION = 1;
    private static final String DATABASE_NAME = "stayHealthy.db";

    public DataBase(Context context) {
        super(context, DATABASE_NAME, null, VERSION);
    }

    @Override
    public void onCreate(SQLiteDatabase db) {
        db.execSQL(myTipsPrototype());
        db.execSQL(myTipsCatagoryTable());
    }

    @Override
    public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {

    }
    public static String myTipsPrototype() {
        String query = "CREATE TABLE "+ DatabaseSchema.MyTips.DEFAULT_TABLE + " ( " +
                DatabaseSchema.MyTips.TITLE + " TEXT PRIMARY KEY, " +
                DatabaseSchema.MyTips.IMAGE + " BLOB , " +
                DatabaseSchema.MyTips.IMPORTANCE + " TEXT , " +
                DatabaseSchema.MyTips.DESCRIPTION + " TEXT );" ;
        Log.d("Database TESTING : " , query);
        return query;
    }
    public static String myTipsRename(String newName) {
        String query = "ALTER TABLE "+ DatabaseSchema.MyTips.DEFAULT_TABLE + " RENAME TO "+ newName +";";
        Log.d("Database TESTING 1: " , query);
        return query;
    }
    public static String myTipsCatagoryTable() {
        String query = "CREATE TABLE "+ DatabaseSchema.MyTips.CATAGORY_TABLE + " ( "+
                DatabaseSchema.MyTips.CATAGORY_TABLE_NAME + " TEXT PRIMARY KEY, " +
                DatabaseSchema.MyTips.CATAGORY_IMAGE + " BLOB );";
        Log.d("Catagory Table :", query);
        return query;
    }
    public static ContentValues myTipsInsertCatagory(String name, Bitmap bitmap) {
        byte[] image;
        ByteArrayOutputStream bout = new ByteArrayOutputStream();
        bitmap.compress(Bitmap.CompressFormat.JPEG, 0, bout);
        image = bout.toByteArray();
        ContentValues contentValues = new ContentValues();
        contentValues.put(DatabaseSchema.MyTips.CATAGORY_TABLE_NAME, name);
        contentValues.put(DatabaseSchema.MyTips.CATAGORY_IMAGE, image);
        return contentValues;
    }
}

